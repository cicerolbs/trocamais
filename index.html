<!DOCTYPE html>
<html lang='pt-BR'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <link href='https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css' rel='stylesheet'>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js'></script>
  <title>Contratação de Empréstimos TROCA MAIS</title>
  <style>
    .container {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class='container'>
    <h1 class='text-primary text-center'>Contratação de Empréstimos TROCA MAIS</h1>
    <div class='form-group'>
      <label for='bandeira'>Selecione a bandeira do cartão:</label>
      <select class='form-control' id='bandeira'>
        <option value='master'>Master/Visa</option>
        <option value='elo'>Elo/Hiper/Outros</option>
      </select>
    </div>
    <div class='form-group'>
      <label for='limite'>Limite disponível:</label>
      <input type='number' class='form-control' id='limite' placeholder='Informe o limite disponível'>
    </div>
    <div class='form-group'>
      <label for='parcelas'>Quantidade de parcelas:</label>
      <select class='form-control' id='parcelas'>
        <option value='1'>1</option>
        <option value='2'>2</option>
        <option value='3'>3</option>
        <option value='4'>4</option>
        <option value='5'>5</option>
        <option value='6'>6</option>
        <option value='7'>7</option>
        <option value='8'>8</option>
        <option value='9'>9</option>
        <option value='10'>10</option>
        <option value='11'>11</option>
        <option value='12'>12</option>
        <option value='13'>13</option>
        <option value='14'>14</option>
        <option value='15'>15</option>
        <option value='16'>16</option>
        <option value='17'>17</option>
        <option value='18'>18</option>
      </select>
    </div>
    <button class='btn btn-primary' onclick='simular()'>Simular</button>
    <div id='resultado' class='mt-4'></div>
    <button class='btn btn-secondary mt-4' onclick='compartilhar()'>Compartilhar</button>
  </div>
  <script>
    const juros = {
      'master': [1.39, 3.76, 4.09, 4.78, 5.47, 6.14, 6.79, 7.64, 8.3, 8.95, 9.6, 10, 10.7, 12.29, 12.89, 13.53, 14.14, 15.34],
      'elo': [2.39, 4.73, 5.27, 5.69, 6.63, 7.32, 7.97, 9.43, 10.1, 11.4, 12, 12.06, 12.65, 13.32, 13.9, 14.53, 15.13, 16.34]
    };

    function simular() {
      const bandeira = document.getElementById('bandeira').value;
      const limite = parseFloat(document.getElementById('limite').value);
      const parcelas = parseInt(document.getElementById('parcelas').value);
      const taxa = juros[bandeira][parcelas - 1] / 100;
      const total = limite * (1 + taxa);
      const valorParcela = total / parcelas;
      const jurosMes = taxa * 100;
      const jurosAno = (Math.pow(1 + taxa, 12) - 1) * 100;
      const cet = (Math.pow(1 + taxa, parcelas) - 1) * 100;

      const resultado = `Valor do empréstimo: R$${limite.toFixed(2)}<br>Total a ser pago: R$${total.toFixed(2)}<br>Quantidade de parcelas: ${parcelas}<br>Juros ao mês: ${jurosMes.toFixed(2)}%<br>Juros ao ano: ${jurosAno.toFixed(2)}%<br>Custo Efetivo Total: ${cet.toFixed(2)}%<br>Bandeira do cartão: ${bandeira.toUpperCase()}`;
      document.getElementById('resultado').innerHTML = resultado;
    }

    function compartilhar() {
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF();
      pdf.text(document.getElementById('resultado').innerText, 10, 10);
      pdf.save('Simulacao_Emprestimo.pdf');
    }
  </script>
</body>
</html>
