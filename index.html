<!DOCTYPE html>
<html lang='pt-BR'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <link href='https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css' rel='stylesheet'>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <title>Contratação de Empréstimos TROCA MAIS</title>
  <style>
    .container {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class='container'>
    <h1 class='text-primary text-center'>Contratação de Empréstimos TROCA MAIS</h1>
    <div class='form-group'>
      <label for='bandeira'>Selecione a bandeira do cartão:</label>
      <select class='form-control' id='bandeira'>
        <option value='visa'>Visa</option>
        <option value='master'>Master</option>
        <option value='hiper'>Hiper</option>
        <option value='elo'>Elo</option>
        <option value='outra'>Outra</option>
      </select>
    </div>
    <div class='form-group'>
      <label for='limite'>Limite disponível:</label>
      <input type='number' class='form-control' id='limite' placeholder='Informe o limite disponível'>
    </div>
    <div class='form-group'>
      <label for='parcelas'>Quantidade de parcelas:</label>
      <select class='form-control' id='parcelas'>
        <option value='1'>1</option>
        <option value='2'>2</option>
        <!-- ... -->
      </select>
    </div>
    <button class='btn btn-primary' id='simular'>Simular</button>
    <div id='resultado' class='mt-4'></div>
    <button class='btn btn-success mt-4' id='compartilhar'>Compartilhar</button>
  </div>
  <script>
    const taxas = {
      'visa': [1.39, 3.76, 4.09, 4.78, 5.47, 6.14, 6.79, 7.64, 8.30, 8.95, 9.60, 10, 10.7, 12.29, 12.89, 13.53, 14.14, 14.73, 15.34],
      'master': [1.39, 3.76, 4.09, 4.78, 5.47, 6.14, 6.79, 7.64, 8.30, 8.95, 9.60, 10, 10.7, 12.29, 12.89, 13.53, 14.14, 14.73, 15.34],
      'hiper': [2.39, 4.73, 5.27, 5.69, 6.63, 7.32, 7.97, 9.43, 10.1, 11.4, 12, 12.06, 12.65, 13.32, 13.9, 14.53, 15.13, 15.73, 16.34],
      'elo': [2.39, 4.73, 5.27, 5.69, 6.63, 7.32, 7.97, 9.43, 10.1, 11.4, 12, 12.06, 12.65, 13.32, 13.9, 14.53, 15.13, 15.73, 16.34],
      'outra': [2.39, 4.73, 5.27, 5.69, 6.63, 7.32, 7.97, 9.43, 10.1, 11.4, 12, 12.06, 12.65, 13.32, 13.9, 14.53, 15.13, 15.73, 16.34]
    };

    function simular() {
      const bandeira = document.getElementById('bandeira').value;
      const limite = parseFloat(document.getElementById('limite').value);
      const parcelas = parseInt(document.getElementById('parcelas').value);
      const taxa = taxas[bandeira][parcelas - 1] / 100;
      const valorEmprestimo = limite;
      const totalPagar = limite * (1 + taxa);
      const valorParcela = totalPagar / parcelas;
      const jurosMensais = taxa * 100;
      const jurosAnuais = (Math.pow(1 + taxa, 12) - 1) * 100;
      const custoEfetivo = (Math.pow(1 + taxa, 12) - 1) * 100;

      const resultado = `Valor do empréstimo: R$ ${valorEmprestimo.toFixed(2)}\\nTotal a ser pago: R$ ${totalPagar.toFixed(2)}\\nQuantidade de parcelas: ${parcelas}\\nJuros ao mês: ${jurosMensais.toFixed(2)}%\\nJuros ao ano: ${jurosAnuais.toFixed(2)}%\\nCusto Efetivo Total: ${custoEfetivo.toFixed(2)}%\\nBandeira do cartão: ${bandeira.toUpperCase()}`;
      document.getElementById('resultado').innerText = resultado;
    }

    function compartilhar() {
      const pdf = new jsPDF();
      pdf.setFontSize(14);
      pdf.setFontType('bold');
      pdf.text('Contratação de Empréstimos TROCA MAIS', 10, 10);
      pdf.text('Demonstrativo:', 10, 20);
      pdf.setFontSize(12);
      pdf.setFontType('normal');
      pdf.text(document.getElementById('resultado').innerText, 10, 30);
      pdf.setFontSize(12);
      pdf.setFontType('normal');
      pdf.text(`Data: ${new Date().toLocaleDateString()} Hora: ${new Date().toLocaleTimeString()}`, 10, 180);
      pdf.save('Emprestimo_TROCA_MAIS.pdf');
    }
  </script>
</body>
</html>
